<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>KSITM Signup</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <!-- Tailwind build -->
    <link href="../src/output.css" rel="stylesheet" />
    <link rel="icon" type="image/png" href="../images/ksitm logo.png" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
    />
    <!-- Step logic (navigation, progress, animations) -->
    <script type="module" defer src="../Js/signup-steps.js"></script>
    <!-- Supabase signup + inserts -->
    <script type="module" defer src="../Js/signup.js"></script>
  </head>

  <body
    class="relative min-h-screen flex items-center justify-center font-sans text-white"
  >
    <!-- Background gradient + logo overlay -->
    <div class="absolute inset-0 bg-violet-900">
      <div
        class="absolute inset-0 flex items-center justify-center opacity-25"
      ></div>
    </div>

    <!-- Container -->
    <div class="relative z-10 w-full px-4">
      <div
        class="mx-auto max-w-md w-full rounded-2xl p-6 sm:p-8 shadow-2xl backdrop-blur-lg bg-white"
      >
        <!-- Header -->
        <div class="text-center mb-8 sm:mb-10 lg:mb-12">
          <h2
            class="text-2xl sm:text-3xl lg:text-4xl xl:text-2xl font-extrabold text-violet-900"
          >
            Create Your KSITM Account
          </h2>
          <p
            class="mt-2 text-sm sm:text-base lg:text-lg xl:text-xl text-violet-800 max-w-2xl mx-auto"
          >
            Start your journey into innovation and excellence
          </p>
        </div>

        <!-- Progress bar -->
        <div class="w-full bg-white rounded-full h-2 mb-6">
          <div
            id="progressBar"
            class="bg-violet-900 h-2 rounded-full transition-all duration-500"
            style="width: 33%"
          ></div>
        </div>

        <!-- Form wrapper -->
        <form id="signupForm" class="space-y-6">
          <!-- Step 1: Account Basics -->
          <div
            id="step1"
            class="step block transition-all duration-500 bg-white rounded-lg p-6"
          >
            <div class="flex flex-col items-center mb-4">
              <i class="fas fa-user text-5xl text-violet-900 mb-3"></i>
              <h3 class="text-xl font-bold text-violet-900">Account Basics</h3>
              <p class="text-xs text-violet-900 mt-1">
                Enter your username and email
              </p>
            </div>

            <!-- Username -->
            <div class="relative mb-5">
              <i
                class="fas fa-id-card absolute left-4 top-1/2 -translate-y-1/2 text-violet-500"
              ></i>
              <input
                type="text"
                id="username"
                name="username"
                required
                class="peer w-full pl-12 pt-5 pb-2 rounded-md bg-violet-50 text-violet-900 placeholder-transparent focus:outline-none focus:ring-2 focus:ring-violet-400"
                placeholder="Username"
              />
              <label
                for="username"
                class="absolute left-12 top-2 text-violet-900 text-sm transition-all peer-placeholder-shown:top-1/2 peer-placeholder-shown:text-base peer-placeholder-shown:text-violet-300 peer-focus:top-2 peer-focus:text-sm peer-focus:text-violet-500"
              >
                Username
              </label>
            </div>

            <!-- Email -->
            <div class="relative mb-5">
              <i
                class="fas fa-envelope absolute left-4 top-1/2 -translate-y-1/2 text-violet-500"
              ></i>
              <input
                type="email"
                id="email"
                name="email"
                required
                class="peer w-full pl-12 pt-5 pb-2 rounded-md bg-violet-50 text-violet-900 placeholder-transparent focus:outline-none focus:ring-2 focus:ring-violet-400"
                placeholder="Email Address"
              />
              <label
                for="email"
                class="absolute left-12 top-2 text-violet-900 text-sm transition-all peer-placeholder-shown:top-1/2 peer-placeholder-shown:text-base peer-placeholder-shown:text-violet-300 peer-focus:top-2 peer-focus:text-sm peer-focus:text-violet-500"
              >
                Email Address
              </label>
            </div>

            <button
              type="button"
              onclick="nextStep(2)"
              class="w-full mt-2 py-3 rounded-full bg-violet-500 text-white font-bold shadow-lg transition hover:bg-violet-500"
            >
              Next
            </button>
          </div>

          <!-- Step 2: Personal Information -->
          <div
            id="step2"
            class="step hidden transition-all duration-500 bg-white rounded-lg p-6"
          >
            <div class="flex flex-col items-center mb-4">
              <i class="fas fa-id-card text-5xl text-violet-900 mb-3"></i>
              <h3 class="text-xl font-bold text-violet-900">
                Personal Information
              </h3>
              <p class="text-xs text-violet-900 mt-1">Tell us more about you</p>
            </div>

            <!-- Full Name -->
            <div class="relative mb-5">
              <i
                class="fas fa-user absolute left-4 top-1/2 -translate-y-1/2 text-violet-400"
              ></i>
              <input
                type="text"
                id="name"
                name="name"
                required
                class="peer w-full pl-12 pt-5 pb-2 rounded-md bg-violet-50 text-violet-600 placeholder-transparent focus:outline-none focus:ring-2 focus:ring-violet-400"
                placeholder="Full Name"
              />
              <label
                for="name"
                class="absolute left-12 top-2 text-violet-400 text-sm transition-all peer-placeholder-shown:top-1/2 peer-placeholder-shown:text-base peer-placeholder-shown:text-violet-300 peer-focus:top-2 peer-focus:text-sm peer-focus:text-violet-500"
              >
                Full Name
              </label>
            </div>

            <!-- Phone -->
            <div class="relative mb-5">
              <i
                class="fas fa-phone absolute left-4 top-1/2 -translate-y-1/2 text-violet-400"
              ></i>
              <input
                type="tel"
                id="phone"
                name="phone"
                required
                class="peer w-full pl-12 pt-5 pb-2 rounded-md bg-violet-50 text-violet-600 placeholder-transparent focus:outline-none focus:ring-2 focus:ring-violet-400"
                placeholder="Phone Number"
              />
              <label
                for="phone"
                class="absolute left-12 top-2 text-violet-400 text-sm transition-all peer-placeholder-shown:top-1/2 peer-placeholder-shown:text-base peer-placeholder-shown:text-violet-300 peer-focus:top-2 peer-focus:text-sm peer-focus:text-violet-500"
              >
                Phone Number
              </label>
            </div>

            <!-- DOB -->
            <div class="relative mb-5">
              <i
                class="fas fa-calendar-alt absolute left-4 top-1/2 -translate-y-1/2 text-violet-400"
              ></i>
              <input
                type="date"
                id="dob"
                name="dob"
                required
                class="peer w-full pl-12 pt-5 pb-2 rounded-md bg-violet-50 text-violet-600 focus:outline-none focus:ring-2 focus:ring-violet-400"
              />
              <label
                for="dob"
                class="absolute left-12 top-2 text-violet-400 text-sm"
              >
                Date of Birth
              </label>
            </div>

            <!-- Address -->
            <div class="relative mb-5">
              <i
                class="fas fa-map-marker-alt absolute left-4 top-1/2 -translate-y-1/2 text-violet-400"
              ></i>
              <input
                type="text"
                id="address"
                name="address"
                required
                class="peer w-full pl-12 pt-5 pb-2 rounded-md bg-violet-50 text-violet-600 placeholder-transparent focus:outline-none focus:ring-2 focus:ring-violet-400"
                placeholder="Address"
              />
              <label
                for="address"
                class="absolute left-12 top-2 text-violet-400 text-sm transition-all peer-placeholder-shown:top-1/2 peer-placeholder-shown:text-base peer-placeholder-shown:text-violet-300 peer-focus:top-2 peer-focus:text-sm peer-focus:text-violet-500"
              >
                Address
              </label>
            </div>

            <div class="flex gap-3">
              <button
                type="button"
                onclick="prevStep(1)"
                class="w-1/2 py-3 rounded-full bg-gray-300 text-violet-600 font-bold shadow-lg transition hover:bg-gray-400"
              >
                Back
              </button>
              <button
                type="button"
                onclick="nextStep(3)"
                class="w-1/2 py-3 rounded-full bg-violet-500 text-white font-bold shadow-lg transition hover:bg-violet-600"
              >
                Next
              </button>
            </div>
          </div>

          <!-- Step 3: Security -->
          <div
            id="step3"
            class="step hidden transition-all duration-500 bg-white rounded-lg p-6"
          >
            <div class="flex flex-col items-center mb-4">
              <i class="fas fa-lock text-5xl text-violet-900 mb-3"></i>
              <h3 class="text-xl font-bold text-violet-500">Security</h3>
              <p class="text-xs text-violet-300 mt-1">Set a strong password</p>
            </div>

            <!-- Password -->
            <div class="mb-5">
              <label
                for="password"
                class="block text-sm font-medium text-violet-400 mb-2"
              >
                Password
              </label>
              <div
                class="flex items-center rounded-md bg-violet-50 focus-within:ring-2 focus-within:ring-violet-400"
              >
                <i class="fas fa-lock text-violet-400 px-3"></i>
                <input
                  type="password"
                  id="password"
                  name="password"
                  required
                  class="flex-1 bg-transparent text-violet-600 py-2 px-1 focus:outline-none"
                  placeholder="Enter your password"
                />
                <button
                  type="button"
                  id="togglePasswordBtn"
                  class="px-3 text-sm text-violet-400 hover:text-violet-600 transition flex items-center gap-1"
                >
                  <i class="fas fa-eye"></i><span>Show</span>
                </button>
              </div>
            </div>

            <!-- Confirm Password -->
            <div class="mb-5">
              <label
                for="confirmPassword"
                class="block text-sm font-medium text-violet-400 mb-2"
              >
                Confirm Password
              </label>
              <div
                class="flex items-center rounded-md bg-violet-50 focus-within:ring-2 focus-within:ring-violet-400"
              >
                <i class="fas fa-lock text-violet-400 px-3"></i>
                <input
                  type="password"
                  id="confirmPassword"
                  name="confirmPassword"
                  required
                  class="flex-1 bg-transparent text-violet-600 py-2 px-1 focus:outline-none"
                  placeholder="Re-enter your password"
                />
                <button
                  type="button"
                  id="toggleConfirmPasswordBtn"
                  class="px-3 text-sm text-violet-400 hover:text-violet-600 transition flex items-center gap-1"
                >
                  <i class="fas fa-eye"></i><span>Show</span>
                </button>
              </div>
            </div>

            <div class="flex gap-3">
              <button
                type="button"
                onclick="prevStep(2)"
                class="w-1/2 py-3 rounded-full bg-gray-300 text-violet-600 font-bold shadow-lg transition hover:bg-gray-400"
              >
                Back
              </button>
              <button
                type="submit"
                id="signupBtn"
                class="w-1/2 py-3 rounded-full bg-violet-500 text-white font-bold shadow-lg transition transform hover:scale-105 flex items-center justify-center gap-2"
              >
                <i class="fas fa-user-plus"></i>
                <span id="signupBtnText">Sign Up</span>
                <span
                  id="signupBtnLoader"
                  class="hidden border-2 border-white border-t-transparent rounded-full w-5 h-5 animate-spin"
                ></span>
              </button>
            </div>
          </div>
        </form>

        <!-- Footer links -->
        <p class="mt-6 text-center text-violet-600">
          Already have an account?
          <a
            href="../Pages/login.html"
            class="text-violet-900 font-bold hover:underline"
            >Login here</a
          >
        </p>
        <div class="mt-4 text-center">
          <a
            href="../Admin/pages/admin-login.html"
            class="inline-flex items-center gap-2 text-gray-500 hover:text-violet-200 text-sm"
          >
            <i class="fas fa-user-shield"></i> Admin Login
          </a>
        </div>
      </div>
    </div>

    <!-- Feedback Modal -->
    <div
      id="feedbackModal"
      class="hidden fixed inset-0 bg-black/60 flex items-center justify-center z-50 transition-opacity duration-300 ease-out"
    >
      <div
        id="modalContent"
        class="rounded-2xl shadow-2xl w-11/12 max-w-md p-8 transform scale-95 opacity-0 transition-all duration-300 ease-out text-center bg-white"
      >
        <!-- Icon + Title -->
        <div class="flex flex-col items-center mb-6">
          <div
            id="modalIconWrapper"
            class="w-20 h-20 flex items-center justify-center rounded-full mb-4 shadow-lg bg-violet-500"
          >
            <i
              id="modalIcon"
              class="fas fa-info-circle text-4xl text-white drop-shadow-md"
            ></i>
          </div>
          <h5
            id="modalTitleText"
            class="text-xl font-bold text-black tracking-wide"
          >
            System Message
          </h5>
        </div>

        <!-- Body -->
        <div class="mb-6">
          <p
            id="modalMessage"
            class="text-black text-base leading-relaxed font-medium px-2"
          >
            <!-- Text injected dynamically -->
          </p>
        </div>

        <!-- Footer Button -->
        <button
          id="modalCloseBtn"
          class="w-full py-3 rounded-lg bg-violet-500 text-white font-semibold flex items-center justify-center gap-2 shadow-md hover:bg-violet-600 hover:scale-105 transition-transform duration-200"
        >
          <i class="fas fa-check text-lg"></i> Continue
        </button>

        <!-- Footer Note -->
        <div
          class="mt-6 text-xs text-gray-400 flex items-center justify-center gap-2"
        >
          <i class="fas fa-lock text-violet-600"></i>
          <span class="text-violet-600"
            >Authentication powered by Supabase</span
          >
        </div>
      </div>
    </div>

    <!-- Supabase init (global) -->
    <script type="module">
      import { createClient } from "https://cdn.jsdelivr.net/npm/@supabase/supabase-js/+esm";
      const supabase = createClient(
        "https://cwyiyplxadmcevejshtl.supabase.co",
        "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImN3eWl5cGx4YWRtY2V2ZWpzaHRsIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njg4MjI3MDcsImV4cCI6MjA4NDM5ODcwN30.bbMmrLZphjkUOl_m8HlfqwKZ08lkCZ7Vj39edpm3_LY",
      );
      window.supabase = supabase;
    </script>
  </body>
</html>
